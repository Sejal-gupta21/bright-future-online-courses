<app-navbar></app-navbar>
<div class="container mt-5 mb-5">
    <h2 class="text-center fw-bold text-light mb-5">My Enrolled Courses</h2>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="no-courses-message text-center mx-auto my-5 p-5">
        <div class="spinner-border spinner-border-custom" role="status">
            <span class="visually-hidden">Loading your courses...</span>
        </div>
        <p class="mt-3 fs-5 text-muted">Loading your enrolled courses...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="alert alert-danger alert-custom mx-auto my-5 p-4" role="alert">
        <h4 class="alert-heading fw-bold">Error Loading Courses!</h4>
        <p>{{ error }}</p>
        <hr>
        <p class="mb-0 text-sm">Please check your network connection or try again later.</p>
    </div>

    <!-- No Courses State -->
    <div *ngIf="enrolledCourses.length === 0 && !isLoading && !error" class="no-courses-message text-center mx-auto my-5 p-5">
        <span class="material-icons d-block mb-3" style="font-size: 4rem;">book_online</span>
        <p class="h4 fw-bold mb-3">You haven't enrolled in any courses yet.</p>
        <a routerLink="/dashboard" class="btn btn-explore-courses-custom px-5 py-3">Explore Courses</a>
    </div>

    <!-- Enrolled Courses Grid -->
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4" *ngIf="enrolledCourses.length > 0 && !isLoading && !error">
        <div class="col" *ngFor="let course of enrolledCourses">
            <div class="card course-card h-100">
                <img [src]="course.imageUrl || 'https://placehold.co/400x220/E0F2F7/000?text=Course+Image'"
                     class="card-img-top"
                     [alt]="course.title" />
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-info fw-bold mb-2">{{ course.title }}</h5>
                    <p class="card-text text-light mb-3 flex-grow-1">{{ course.description }}</p>
                    <div class="d-flex align-items-center text-sm text-secondary mb-1">
                        <span class="material-icons me-1 fs-6 text-info">person</span>
                        <span>{{ course.instructor || 'Unknown' }}</span>
                    </div>
                    <div class="d-flex align-items-center text-sm text-secondary mb-3">
                        <span class="material-icons me-1 fs-6 text-warning">star</span>
                        <span>{{ course.rating }} ({{ course.numRatings || 0 }} ratings)</span>
                    </div>
                </div>
                <div class="card-footer bg-transparent border-top border-secondary pt-0 pb-3 text-end">
                    <button class="btn btn-success-custom w-100 py-2" (click)="startCourse(course)">
                        <span class="material-icons me-2 my-color" >play_circle_outline</span> Start Course
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>